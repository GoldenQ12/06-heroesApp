import{A as j,B as $e,C as Ue,D as qe,E as Ge,F as ze,G as Je,H as Ke,I as Qe,J as We,K as Xe,L as ie,M as Ye,N as Ze,O as re,P as et,Q as tt,R as it,S as rt,T as ot,U as nt,V as at,W as mt,a as J,b,c as He,d as K,e as Q,f as L,g as W,h as X,i as De,j as Pe,k as x,l as Te,m as Ne,n as Le,o as Be,p as Oe,q as je,r as Y,s as Ve,t as Ae,u as B,v as Z,w as O,x as ee,y as Re,z as te}from"./chunk-K2TFE6YT.js";import{a as Ee,g as G,h as we,i as N,j as z,k as le,l as Fe,m as ke}from"./chunk-4AVACXTL.js";import"./chunk-JGYM447R.js";import{$ as U,Bb as u,Bc as xe,C as me,Cc as Me,Db as E,Dc as ye,I as he,Kb as F,Lb as a,Mb as h,Nb as v,Qb as _e,Rb as se,Sb as w,T as $,Ta as P,Tb as k,Ub as Se,Vb as Ie,Wa as s,Xa as d,_ as ge,da as ve,ja as g,ka as q,ma as Ce,mb as C,n as ae,ob as c,r as fe,sa as _,ta as S,ub as n,vb as r,wb as p,xc as I,yb as y,yc as T,zc as be}from"./chunk-AN2JJSC6.js";var H=(()=>{let e=class e{constructor(t){this.http=t,this.baseUrl=Fe.baseUrl}getHeroes(){return this.http.get(`${this.baseUrl}/heroes`)}getHeroById(t){return this.http.get(`${this.baseUrl}/heroes/${t}`).pipe(me(o=>ae(void 0)))}getSuggestions(t){return this.http.get(`${this.baseUrl}/heroes?q=${t}&_limit=6`)}addHero(t){return this.http.post(`${this.baseUrl}/heroes`,t)}updateHero(t){if(!t.id)throw Error("Hero id is required");return this.http.patch(`${this.baseUrl}/heroes/${t.id}`,t)}deleteHeroById(t){return this.http.delete(`${this.baseUrl}/heroes/${t}`).pipe(fe(o=>!0),me(o=>ae(!1)))}};e.\u0275fac=function(o){return new(o||e)(ve(Ee))},e.\u0275prov=ge({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var V=(()=>{let e=class e{transform(t){return!t.id&&!t.alt_img?"assets/no-image.png":t.alt_img?t.alt_img:`assets/heroes/${t.id}.jpg`}};e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=Ce({name:"heroImage",type:e,pure:!0});let i=e;return i})();function Ct(i,e){i&1&&(n(0,"mat-grid-list",2)(1,"mat-grid-tile"),p(2,"mat-spinner"),r()())}function _t(i,e){if(i&1){let l=y();n(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title"),a(4),r(),n(5,"mat-card-subtitle"),a(6),r()(),p(7,"img",5),w(8,"heroImage"),r(),n(9,"mat-card",6)(10,"mat-card-header")(11,"mat-card-title"),a(12,"Informacion del heroe"),r(),n(13,"mat-card-subtitle"),a(14),r()(),n(15,"mat-card-content")(16,"mat-list")(17,"mat-list-item"),a(18),r(),n(19,"mat-list-item"),a(20),r(),n(21,"mat-list-item"),a(22),r(),n(23,"mat-list-item"),a(24),r()()(),n(25,"button",7),u("click",function(){_(l);let o=E();return S(o.goBack())}),a(26," Regresar "),r()()()}if(i&2){let l=E();s(4),h(l.hero.alter_ego),s(2),h(l.hero.superhero),s(),c("src",k(8,9,l.hero),P)("alt",l.hero.superhero),s(7),h(l.hero.superhero),s(4),h(l.hero.first_appearance),s(2),h(l.hero.characters),s(2),h(l.hero.publisher),s(2),h(l.hero.alter_ego)}}var lt=(()=>{let e=class e{constructor(t,o,m){this.heroesService=t,this.routeParams=o,this.router=m}ngOnInit(){this.routeParams.params.pipe(he(3e3),$(({id:t})=>this.heroesService.getHeroById(t))).subscribe(t=>{if(!t)return this.router.navigate(["/heroes/list"]);this.hero=t})}goBack(){this.router.navigateByUrl("heroes/list")}};e.\u0275fac=function(o){return new(o||e)(d(H),d(G),d(N))},e.\u0275cmp=g({type:e,selectors:[["app-hero-page"]],decls:3,vars:2,consts:[["divLoading",""],["class","grid",4,"ngIf","ngIfElse"],["cols","2"],[1,"grid"],[1,"col-12","sm:col-6","mt-2","p-2"],["mat-card-image","",3,"src","alt"],[1,"col-12","sm:col-6"],["mat-button","","color","warn",3,"click"]],template:function(o,m){if(o&1&&C(0,Ct,3,0,"ng-template",null,0,Ie)(2,_t,27,11,"div",1),o&2){let f=F(1);s(2),c("ngIf",m.hero)("ngIfElse",f)}},dependencies:[T,b,B,O,te,j,ee,Z,Xe,We,Ze,re,tt,V]});let i=e;return i})();var St=()=>({width:"250px"});function It(i,e){if(i&1){let l=y();n(0,"mat-list-item",9),u("click",function(){_(l),E();let o=F(2);return S(o.toggle())}),n(1,"mat-icon",10),a(2),r(),a(3),r()}if(i&2){let l=e.$implicit;c("routerLink",l.url),s(2),h(l.icon),s(),v(" ",l.label," ")}}var pt=(()=>{let e=class e{constructor(t,o){this.authService=t,this.router=o,this.sidebarItems=[{label:"Listado",icon:"label",url:"./list"},{label:"A\xF1adir",icon:"add",url:"./new-hero"},{label:"Buscar",icon:"search",url:"./search"}]}get user(){return this.authService.currentUser}OnLogout(){this.authService.logout(),this.router.navigate(["/auth/login"])}};e.\u0275fac=function(o){return new(o||e)(d(ke),d(N))},e.\u0275cmp=g({type:e,selectors:[["app-layout-page"]],decls:23,vars:4,consts:[["sidenav",""],["fullscreen",""],["mode","push",3,"ngStyle"],[1,"spacer"],["mat-icon-button","",3,"click"],[3,"routerLink","click",4,"ngFor","ngForOf"],["color","primary"],["mat-button","",3,"click"],[1,"container","p-3"],[3,"click","routerLink"],["matListItemIcon",""]],template:function(o,m){if(o&1){let f=y();n(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"mat-toolbar")(4,"span"),a(5,"Men\xFA"),r(),p(6,"span",3),n(7,"button",4),u("click",function(){_(f);let A=F(2);return S(A.toggle())}),n(8,"mat-icon"),a(9,"menu"),r()()(),n(10,"mat-nav-list"),C(11,It,4,3,"mat-list-item",5),r()(),n(12,"mat-toolbar",6)(13,"button",4),u("click",function(){_(f);let A=F(2);return S(A.toggle())}),n(14,"mat-icon"),a(15,"menu"),r()(),p(16,"span",3),n(17,"span"),a(18),r(),n(19,"button",7),u("click",function(){return _(f),S(m.OnLogout())}),a(20," Log out "),r()(),n(21,"div",8),p(22,"router-outlet"),r()()}o&2&&(s(),c("ngStyle",_e(3,St)),s(10),c("ngForOf",m.sidebarItems),s(7),v(" ",m.user==null?null:m.user.email," "))},dependencies:[I,be,b,He,L,et,re,Ye,rt,ot,at,we,z]});let i=e;return i})();var bt=i=>["/heroes/edit",i],xt=i=>["/heroes",i];function Mt(i,e){if(i&1&&(n(0,"mat-chip"),a(1),r()),i&2){let l=e.$implicit;s(),v(" ",l," ")}}var dt=(()=>{let e=class e{ngOnInit(){if(!this.hero)throw Error("Hero property required")}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=g({type:e,selectors:[["heroes-hero-card"]],inputs:{hero:"hero"},decls:29,vars:19,consts:[["mat-card-image","",3,"src","alt"],[1,"mt-2"],[4,"ngFor","ngForOf"],["mat-button","","mat-raised","","color","primary",3,"routerLink"],[1,"spacer"]],template:function(o,m){o&1&&(n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),a(3),r(),n(4,"mat-card-subtitle"),a(5),r()(),p(6,"img",0),w(7,"heroImage"),n(8,"mat-card-content",1)(9,"h4"),a(10),r(),n(11,"p")(12,"strong"),a(13,"Primera aparicion"),r(),a(14),p(15,"br"),n(16,"mat-chip-listbox"),C(17,Mt,2,1,"mat-chip",2),w(18,"slice"),r()()(),n(19,"mat-card-actions")(20,"button",3)(21,"mat-icon"),a(22,"edit"),r(),a(23," Editar"),r(),p(24,"span",4),n(25,"button",3)(26,"mat-icon"),a(27,"more_horiz"),r(),a(28," Mas"),r()()()),o&2&&(s(3),h(m.hero.superhero),s(2),h(m.hero.alter_ego),s(),c("src",k(7,9,m.hero),P)("alt",m.hero.superhero),s(4),h(m.hero.publisher),s(4),v(" ",m.hero.first_appearance," "),s(3),c("ngForOf",Se(18,11,m.hero.characters.split(","),0,2)),s(3),c("routerLink",se(15,bt,m.hero.id)),s(5),c("routerLink",se(17,xt,m.hero.id)))},dependencies:[I,b,B,Re,O,te,j,ee,Z,$e,Ue,L,z,Me,V]});let i=e;return i})();function wt(i,e){if(i&1&&(n(0,"div",2),p(1,"heroes-hero-card",3),r()),i&2){let l=e.$implicit;s(),c("hero",l)}}var ut=(()=>{let e=class e{constructor(t){this.heroesService=t,this.heroes=[]}ngOnInit(){this.heroesService.getHeroes().subscribe(t=>this.heroes=t)}};e.\u0275fac=function(o){return new(o||e)(d(H))},e.\u0275cmp=g({type:e,selectors:[["app-list-page"]],decls:5,vars:1,consts:[[1,"grid","mb-8","pt-2"],["class","col-12 md:col-3 xl:col-2",4,"ngFor","ngForOf"],[1,"col-12","md:col-3","xl:col-2"],[3,"hero"]],template:function(o,m){o&1&&(n(0,"h1"),a(1,"Listado de heroes"),r(),p(2,"mat-divider"),n(3,"div",0),C(4,wt,2,1,"div",1),r()),o&2&&(s(4),c("ngForOf",m.heroes))},dependencies:[I,ie,dt]});let i=e;return i})();var de=function(i){return i.DCComics="DC Comics",i.MarvelComics="Marvel Comics",i}(de||{});var ft=(()=>{let e=class e{constructor(t,o){this.dialogRef=t,this.data=o}onNoClick(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}};e.\u0275fac=function(o){return new(o||e)(d(qe),d(Ge))},e.\u0275cmp=g({type:e,selectors:[["app-confirm-dialog"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-button","",3,"click"],["mat-button","","color","primary","cdkFocusInitial","",3,"click"]],template:function(o,m){o&1&&(n(0,"h2",0),a(1,"\xBFEstas seguro?"),r(),n(2,"mat-dialog-content")(3,"p"),a(4),r()(),n(5,"mat-dialog-actions")(6,"button",1),u("click",function(){return m.onNoClick()}),a(7,"No Thanks"),r(),n(8,"button",2),u("click",function(){return m.onConfirm()}),a(9,"Ok"),r()()),o&2&&(s(4),v("Este proceso no se puede deshacer, estas a punto de eliminar a ",m.data.superhero,""))},dependencies:[b,Je,Qe,Ke]});let i=e;return i})();function Tt(i,e){if(i&1&&(n(0,"mat-option",16),a(1),r()),i&2){let l=e.$implicit;c("value",l.id),s(),v(" ",l.desc," ")}}function Nt(i,e){if(i&1){let l=y();n(0,"button",17),u("click",function(){_(l);let o=E();return S(o.onDeleteHero())}),n(1,"mat-icon"),a(2,"delete"),r(),a(3," Borrar "),r()}}var ue=(()=>{let e=class e{constructor(t,o,m,f,D){this.heroesService=t,this.activatedRoute=o,this.router=m,this.snackBar=f,this.dialog=D,this.heroForm=new Pe({id:new x(""),superhero:new x("",{nonNullable:!0}),publisher:new x(de.DCComics),alter_ego:new x(""),first_appearance:new x(""),characters:new x(""),alt_img:new x("")}),this.publishers=[{id:"DC Comics",desc:"DC - Comics"},{id:"Marvel Comics",desc:"Marvel - Comics"}]}ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe($(({id:t})=>this.heroesService.getHeroById(t))).subscribe(t=>{if(!t)return this.router.navigateByUrl("/");this.heroForm.reset(t)})}get currentHero(){return this.heroForm.value}onSubmit(){if(!this.heroForm.invalid){if(this.currentHero.id){console.log("UPDATED !  "),this.heroesService.updateHero(this.currentHero).subscribe(t=>{this.showSnackbar(`${t.superhero} updated!`)});return}this.heroesService.addHero(this.currentHero).subscribe(t=>{this.router.navigate(["/heroes/edit",t.id]),this.showSnackbar(`${t.superhero} created!`)})}}onDeleteHero(){if(!this.currentHero.id)throw Error("Required ID");this.dialog.open(ft,{data:this.heroForm.value}).afterClosed().subscribe(o=>{o&&this.heroesService.deleteHeroById(this.currentHero.id).subscribe(m=>{m&&this.router.navigateByUrl("/")})})}showSnackbar(t){this.snackBar.open(t,"Done",{duration:2500})}};e.\u0275fac=function(o){return new(o||e)(d(H),d(G),d(N),d(nt),d(ze))},e.\u0275cmp=g({type:e,selectors:[["app-new-page"]],decls:43,vars:7,consts:[[1,"mb-2"],[1,"grid"],[1,"col-12","sm:col-6"],[1,"grid",3,"ngSubmit","formGroup"],["type","text","matInput","","required","","formControlName","superhero"],["type","text","matInput","","required","","formControlName","alter_ego"],[1,"col-12"],["type","text","matInput","","required","","formControlName","first_appearance"],["type","text","matInput","","required","","formControlName","characters"],["formControlName","publisher","required",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","alt_img"],[1,"flex","justify-content-between"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["alt","Imagen del heroe","mat-card-image","",3,"src"],[3,"value"],["mat-flat-button","","color","warn",3,"click"]],template:function(o,m){o&1&&(n(0,"h1"),a(1),r(),p(2,"mat-divider",0),n(3,"div",1)(4,"div",2)(5,"mat-card")(6,"mat-card-content")(7,"form",3),u("ngSubmit",function(){return m.onSubmit()}),n(8,"mat-form-field",2)(9,"mat-label"),a(10,"Super h\xE9roe"),r(),p(11,"input",4),r(),n(12,"mat-form-field",2)(13,"mat-label"),a(14,"Alter ego"),r(),p(15,"input",5),r(),n(16,"mat-form-field",6)(17,"mat-label"),a(18,"Primera aparicion"),r(),p(19,"input",7),r(),n(20,"mat-form-field",6)(21,"mat-label"),a(22,"Personajes"),r(),p(23,"input",8),r(),n(24,"mat-form-field",6)(25,"mat-label"),a(26,"Creador"),r(),n(27,"mat-select",9),C(28,Tt,2,2,"mat-option",10),r()(),n(29,"mat-form-field",6)(30,"mat-label"),a(31,"Alternative Image"),r(),p(32,"input",11),r()(),n(33,"div",12),C(34,Nt,4,0,"button",13),n(35,"button",14),u("click",function(){return m.onSubmit()}),n(36,"mat-icon"),a(37,"save"),r(),a(38," Guardar "),r()()()()(),n(39,"div",2)(40,"mat-card"),p(41,"img",15),w(42,"heroImage"),r()()()),o&2&&(s(),v(" ",m.currentHero.id?"Editar Heroe":"Agregar Heroe",`
`),s(6),c("formGroup",m.heroForm),s(21),c("ngForOf",m.publishers),s(6),c("ngIf",m.currentHero.id),s(7),c("src",k(42,5,m.currentHero),P))},dependencies:[I,T,J,b,B,O,j,Q,K,L,Y,ie,it,Te,W,X,De,Oe,Le,Be,V]});let i=e;return i})();function Lt(i,e){if(i&1&&(n(0,"mat-option",6),a(1),r()),i&2){let l=e.$implicit;c("value",l),s(),h(l.superhero)}}function Bt(i,e){if(i&1&&(n(0,"mat-option",7),a(1),r()),i&2){let l=E();s(),v(" No se encontr\xF3 nada con el termino ",l.searchInput.value," ")}}var ht=(()=>{let e=class e{constructor(t){this.heroesService=t,this.searchInput=new x(""),this.heroes=[]}searchHero(){let t=this.searchInput.value||"";this.heroesService.getSuggestions(t).subscribe(o=>this.heroes=o)}onSelectedOption(t){if(!t.option.value){this.selectedHero=void 0;return}let o=t.option.value;this.searchInput.setValue(o.superhero),this.selectedHero=o}};e.\u0275fac=function(o){return new(o||e)(d(H))},e.\u0275cmp=g({type:e,selectors:[["app-search-page"]],decls:13,vars:7,consts:[["auto","matAutocomplete"],[1,"flex","flex-column","p-2"],["type","text","matInput","",3,"input","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["value","",4,"ngIf"],[3,"value"],["value",""]],template:function(o,m){if(o&1){let f=y();n(0,"div",1)(1,"h3"),a(2,"Buscador"),r(),n(3,"mat-form-field")(4,"mat-label"),a(5,"Buscador de Heroes"),r(),n(6,"input",2),u("input",function(){return _(f),S(m.searchHero())}),r(),n(7,"mat-autocomplete",3,0),u("optionSelected",function(A){return _(f),S(m.onSelectedOption(A))}),C(9,Lt,2,2,"mat-option",4)(10,Bt,2,1,"mat-option",5),r()(),a(11),w(12,"json"),r()}if(o&2){let f=F(8);s(6),c("formControl",m.searchInput)("matAutocomplete",f),s(3),c("ngForOf",m.heroes),s(),c("ngIf",m.heroes.length===0&&m.searchInput.value&&m.searchInput.value.length>0),s(),v(" ",k(12,5,m.selectedHero)," ")}},dependencies:[I,T,Ve,J,Ae,Q,K,Y,W,X,Ne,xe]});let i=e;return i})();var Ot=[{path:"",component:pt,children:[{path:"new-hero",component:ue},{path:"search",component:ht},{path:"edit/:id",component:ue},{path:"list",component:ut},{path:":id",component:lt},{path:"**",redirectTo:"list"}]}],gt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=q({type:e}),e.\u0275inj=U({imports:[le.forChild(Ot),le]});let i=e;return i})();var Oi=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=q({type:e}),e.\u0275inj=U({imports:[ye,mt,je,gt]});let i=e;return i})();export{Oi as HeroesModule};
